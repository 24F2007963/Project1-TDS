{
  "source": "tools-in-data-science-public\\llm-evals.md",
  "type": "course",
  "text": "## LLM Evaluations with PromptFoo\n\nTest-drive your prompts and models with automated, reliable evaluations.\n\n[![\ud83d\ude80 Test Driven Prompt Engineering with PromptFoo (12 min)](https://i.ytimg.com/vi_webp/KhINc5XwhKs/sddefault.webp)](https://youtu.be/KhINc5XwhKs)\n\nPromptFoo is a test-driven development framework for LLMs:\n\n- **Developer-first**: Fast CLI with live reload & caching ([promptfoo.dev](https://promptfoo.dev))\n- **Multi-provider**: Works with OpenAI, Anthropic, HuggingFace, Ollama & more ([GitHub](https://github.com/promptfoo/promptfoo))\n- **Assertions**: Built\u2011in (`contains`, `equals`) & model\u2011graded (`llm-rubric`) ([docs](https://www.promptfoo.dev/docs/configuration/expected-outputs/))\n- **CI/CD**: Integrate evals into pipelines for regression safety ([CI/CD guide](https://www.promptfoo.dev/docs/integrations/ci-cd/))\n\nTo run PromptFoo:\n\n1. Install Node.js & npm ([nodejs.org](https://nodejs.org/))\n2. Set up your [`OPENAI_API_KEY`](https://platform.openai.com/api-keys) environment variable\n3. Configure `promptfooconfig.yaml`. Below is an example:\n\n```yaml\nprompts:\n  - |\n    Summarize this text: \"{{text}}\"\n  - |\n    Please write a concise summary of: \"{{text}}\"\n\nproviders:\n  - openai:gpt-3.5-turbo\n  - openai:gpt-4\n\ntests:\n  - name: summary_test\n    vars:\n      text: \"PromptFoo is an open-source CLI and library for evaluating and testing LLMs with assertions, caching, and matrices.\"\n    assertions:\n      - contains-all:\n          values:\n            - \"open-source\"\n            - \"LLMs\"\n      - llm-rubric:\n          instruction: |\n            Score the summary from 1 to 5 for:\n            - relevance: captures the main info?\n            - clarity: wording is clear and concise?\n          schema:\n            type: object\n            properties:\n              relevance:\n                type: number\n                minimum: 1\n                maximum: 5\n              clarity:\n                type: number\n                minimum: 1\n                maximum: 5\n            required: [relevance, clarity]\n            additionalProperties: false\n\ncommandLineOptions:\n  cache: true\n```\n\nNow, you can run the evaluations and see the results.\n\n```bash\n# Execute all tests\nnpx -y promptfoo eval -c promptfooconfig.yaml\n\n# List past evaluations\nnpx -y promptfoo list evals\n\n# Launch interactive results viewer on port 8080\nnpx -y promptfoo view -p 8080\n```\n\nPromptFoo caches API responses by default (TTL 14 days). You can disable it with `--no-cache` or clear it.\n\n```bash\n# Disable cache for this run\necho y | promptfoo eval --no-cache -c promptfooconfig.yaml\n\n# Clear all cache\necho y | promptfoo cache clear\n```\n"
}